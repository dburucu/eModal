!function(e){e(["jquery"],function(e){function t(e){y.modal(E).find(".modal-content").append(e)}function n(){var t,n;try{n=require("Q")}catch(o){n=window.Q}return n?t=n.defer():(t=e.Deferred(),t.promise=t.promise()),t.promise.element=y,t}function o(t){if(t===!1)return x;var n=e(w).addClass("modal-footer").prop("id",H);if(t)for(var o=0,r=t.length;r>o;o++){var l=t[o],s=e("<button>").addClass("btn btn-"+(l.style||"primary"));for(var i in l)if(l.hasOwnProperty(i))switch(i){case"close":l[i]&&s.attr("data-dismiss","modal").addClass("x");break;case k:var d=l.click.bind(a(!0).find(".modal-content"));s.click(d);break;case"text":s.html(l[i]);break;default:s.attr(i,l[i])}n.append(s)}else n.append('<button class="x btn btn-primary" data-dismiss=modal type=button>Close</button>');return n}function r(t){var n,o=t.loading?I.loadingHtml:t.message||t;return o.on||o.onclick?(n=t.clone===!0?e(o).clone():e(o),n.addClass(t.useBin&&!t.loading?F:M)):n=e(w).attr("style","position:relative;word-wrap:break-word;").addClass(B).html(o),t.css&&t.css!==n.css&&n.css(t.css),n}function a(t){function n(){return e('<div class="modal '+h+' fade" tabindex="-1"><style>.modal-xl{width:96%;}</style><div class=modal-dialog><div class=modal-content> <div class=modal-header><button type=button class="x close" data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title></h4></div></div></div></div>').on("hidden.bs.modal",l).on(k,"button.x",function(t){var n=e(t.currentTarget);if(n.prop("type")!==j)return y.modal(C);try{if(n.closest("form")[0].checkValidity())return b()}catch(o){return b()}return y})}return y||(document.getElementById(g)||e("body").append(e(w).prop("id",g).hide()),y=n()),t&&y?y:y.on(z,function(){e(this).find(L).first().focus()})}function l(){if(y){var e=y.find("."+F).removeClass(F).appendTo("#"+g);y.off(O).off(z).find(".modal-content > div:not(:first-child)").remove(),(!I.allowContentRecycle||R.clone)&&e.remove()}}function s(t,n){if(!t)throw new Error("Invalid parameters!");l(),R=t;var o=a();o.find(".modal-dialog").removeClass("modal-sm modal-lg modal-xl").addClass(t.size?"modal-"+t.size:I.size),o.find(".modal-title").html((t.title||n||I.title)+" ").append(e("<small>").html(t.subtitle||x)),o.on(O,t.onHide)}function i(t,o){function r(e){return y.find("."+B).html(e),l.resolve(y)}function a(e){var t='<div class="alert alert-danger"><strong>XHR Fail: </strong>URL [ '+s.url+"] load fail.</div>";return y.find("."+B).html(t),l.reject(e)}var l=n(),s={async:!0,deferred:l,loading:!0,title:t.title||o||I.title,url:t.url||t};return t.url&&e.extend(s,t),e.ajax({url:s.url,dataType:"text"}).success(r).fail(a),d(s,o)}function d(a,l){s(a,l);var i=a.deferred||n(),d=e(w).append(r(a),o(a.buttons));return t(d),a.async||y.on(z,i.resolve),i.promise}function c(t,o){function r(t){b();var n=e(t.currentTarget).html();return q[n]?a.resolve():a.reject()}var a=n();return d({async:!0,buttons:[{close:!0,click:r,text:q[t.label]?q[t.label]:q[I.confirmLabel],style:T},{close:!0,click:r,text:q[t.label]?t.label:I.confirmLabel}],deferred:a,message:t.message||t,onHide:r,size:t.size,title:t.title||o})}function u(t,o){function r(){return e(this).parent().find("div."+M).fadeOut(function(){e(this).remove()}),a.resolve()}var a=n(),l='<div class=modal-body style="position: absolute;width: 100%;background-color: rgba(255,255,255,0.8);height: 100%;">%1%</div><iframe class="embed-responsive-item" frameborder=0 src="%0%" style="width:100%;height:75vh;display:block;"/>'.replace("%0%",t.message||t.url||t).replace("%1%",I.loadingHtml),s=e(l).load(r);return d({async:!0,buttons:t.buttons||!1,deferred:a,message:s,size:t.size||K.xl,title:t.title||o})}function m(){return e("#"+g+" > *").remove()}function f(t,r){function a(e){var t=y.find(L).val();return b(),e.type!==j?l.reject(t):l.resolve(t),!1}var l=n(),s={deferred:l};if("object"==typeof t?e.extend(s,t):(s.message=t,s.title=r),s.async=!0,s.buttons)for(var i,c=0,u=s.buttons.length;u>c;c++)i=s.buttons[c],i.style=(i.style||"default")+" pull-left",i.type=i.type||"button";var m=o([{close:!0,type:"reset",text:q.OK,style:T},{close:!1,type:j,text:I.confirmLabel}].concat(s.buttons||[]));return s.buttons=!1,s.onHide=a,s.message=e('<form role=form style="margin-bottom:0;"><div class=modal-body><label for=prompt-input class=control-label>'+(s.message||x)+'</label><input type=text class=form-control required autocomplete="on" value="'+(s.value||x)+(s.pattern?'" pattern="'+s.pattern:x)+'"></div></form>').append(m).on(j,a),d(s)}function p(t){return e.extend(I,t)}function v(t){return y&&y.remove(),e.extend(E,t)}function b(){return y&&y.off(O).modal(C),y}var y,h="emodal",g="recycle-bin",w="<div>",x="",k="click",C="hide",z="shown.bs.modal",j="submit",H="eFooter",O=C+".bs.modal",L="input",T="danger",q={OK:"Cancel",True:"False",Yes:"No"},R={},B="modal-body",E={},F="modal-rec",K={sm:"sm",lg:"lg",xl:"xl"},M="modal-tmp",I={allowContentRecycle:!0,confirmLabel:"OK",size:x,loadingHtml:'<h5>Loading...</h5><div class=progress><div class="progress-bar progress-bar-striped active" style="width: 100%"></div></div>',title:"Attention"};return{ajax:i,alert:d,close:b,confirm:c,emptyBin:m,iframe:u,prompt:f,setEModalOptions:p,setModalOptions:v,size:K,version:"1.2.05"}})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof window.module&&window.module.exports?window.module.exports=t(window.require(e[0])):window.eModal=t(window.$)});